@page "/"
@model Alfasoft.ContactManager.Pages.Default
@{
    ViewData["Title"] = "Contacts List";
    var isUserAuthenticated = User.Identity is { IsAuthenticated: true };
}

<div class="bg-white shadow-md rounded-lg overflow-hidden">
    @if (isUserAuthenticated)
    {
        <div class="p-6 bg-gray-50 border-b">
            <button class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition">
                + Add New Contact
            </button>
        </div>
    }

    <div class="overflow-x-auto">
        @if (Model.Contacts.Count == 0)
        {
            <div class="p-6 text-center text-gray-600">
                No contacts available.
            </div>
        }
        else
        {
            <table class="w-full">
                <thead class="bg-gray-200">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">ID</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Name</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Phone
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Email
                    </th>
                    @if (isUserAuthenticated)
                    {
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                            Actions
                        </th>
                    }
                </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                @foreach (var contact in Model.Contacts)
                {
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">@contact.Id</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">@contact.Name</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">@contact.Phone</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">@contact.Email</td>
                        
                        @if (isUserAuthenticated)
                        {
                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                <a asp-page="EditContact" asp-route-id="@contact.Id"
                                   class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-1 rounded mr-2 transition">
                                    Edit
                                </a>
                                <button class="bg-red-500 hover:bg-red-600 text-white px-4 py-1 rounded transition">
                                    Delete
                                </button>
                            </td>
                        }
                    </tr>
                }
                </tbody>
            </table>
        }
    </div>
</div>